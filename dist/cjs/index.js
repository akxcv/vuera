import{jsx as t,jsxs as e}from"react/jsx-runtime";import n from"react";import r from"react-dom";import o from"vue";function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.apply(this,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,c(t,e)}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function a(t,e){if(null==t)return{};var n,r,o={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(n=s[r])>=0||(o[n]=t[n]);return o}var p={vueInstanceOptions:{}},u=["component"],f=["component","on"],l=function(e,n){return e("vuera-internal-react-wrapper",{props:{component:function(){return t("div",{children:n},void 0)}}})},d=/*#__PURE__*/function(e){function n(t){var n;(n=e.call(this,t)||this).currentVueComponent=t.component;var r=n.createVueInstance,o=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n);return n.createVueInstance=function(t,e,n){r(t,o,e,n)},n}i(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.component,n=a(t,u);this.currentVueComponent!==e&&this.updateVueComponent(this.props.component,e),Object.assign(this.vueInstance.$data,n)},r.componentWillUnmount=function(){this.vueInstance.$destroy()},r.createVueInstance=function(t,e,n,r){var i,c=e.props,u=c.component,d=c.on,m=a(c,f);e.vueInstance=new o(s({el:t,data:m},p.vueInstanceOptions,{render:function(t){return t("vuera-internal-component-name",{props:this.$data,on:d},[l(t,this.children)])},components:(i={},i["vuera-internal-component-name"]=u,i["vuera-internal-react-wrapper"]=h,i)}))},r.updateVueComponent=function(t,e){this.currentVueComponent=e,this.vueInstance.$options.components["vuera-internal-component-name"]=e,this.vueInstance.$forceUpdate()},r.render=function(){return t("div",{ref:this.createVueInstance},void 0)},n}(n.Component),m=["children",""],h={name:"ReactInVueRawVueComp",props:["component","passedProps"],render:function(t){return this.createElement=t,t("div",{ref:"react"})},methods:{mountReactComponent:function(e){var o,c=this,p=void 0!==c.$slots.default?{children:c.$slots.default}:{},u=function(e){var r;return(r=/*#__PURE__*/function(n){function r(t){var e;return(e=n.call(this,t)||this).state=s({},t),e}i(r,n);var o=r.prototype;return o.wrapVueChildren=function(t){return t?{render:function(e){return e("div",t)}}:null},o.render=function(){var n=this.state,r=n.children,o=a(n,m),i=this.wrapVueChildren(r);return t(e,s({},o,{children:i&&t(d,{component:i},void 0)}),void 0)},r}(n.Component)).displayName="ReactInVue"+(e.displayName||e.name||"Component"),r}(e);o=function(e){return t(u,s({},e,{ref:function(t){return c.reactComponentRef=t}}),void 0)},r.render(t(o,s({},c.$props.passedProps,c.$attrs,c.$listeners,p),void 0),c.$refs.react)}},mounted:function(){this.mountReactComponent(this.$props.component)},beforeDestroy:function(){r.unmountComponentAtNode(this.$refs.react)},updated:function(){this.reactComponentRef.setState(void 0!==this.$slots.default?{children:this.$slots.default}:{children:null})},inheritAttrs:!1,watch:{$attrs:{handler:function(){this.reactComponentRef.setState(s({},this.$attrs))},deep:!0},"$props.component":{handler:function(t){this.mountReactComponent(t)}},$listeners:{handler:function(){this.reactComponentRef.setState(s({},this.$listeners))},deep:!0},"$props.passedProps":{handler:function(){this.reactComponentRef.setState(s({},this.$props.passedProps))},deep:!0}}};function v(t){return!("object"==typeof t&&!function(t){return t.$$typeof&&"Symbol(react.forward_ref)"===t.$$typeof.toString()}(t)||"function"==typeof t&&t.prototype&&(t.prototype.constructor.super&&t.prototype.constructor.super.isVue||t.prototype instanceof o))}function $(t){return{components:{ReactWrapper:h},props:["passedProps"],inheritAttrs:!1,render:function(e){return e("react-wrapper",{props:{component:t,passedProps:this.$props.passedProps},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}}}var y={install:function(t,e){console.log("Installing Vuera VuePlugin");var n=t.config.optionMergeStrategies.components;t.config.optionMergeStrategies.components=function(t){var e=n.apply(void 0,[t].concat([].slice.call(arguments,1))),r=e?Object.entries(e).reduce(function(t,e){var n,r=e[1];return s({},t,((n={})[e[0]]=v(r)?$(r):r,n))},{}):e;return Object.assign(e,r)},Object.getPrototypeOf(t).constructor.isVue=!0}};function V(e){return v(e)?e:function(n){return t(d,s({},n,{component:e}),void 0)}}function C(t,e,r){return v(t)?n.createElement(t,e,r):n.createElement(d,Object.assign({component:t},e),r)}var R=function(t){return e("div",{children:["Hey ",t.name,", say hello to TypeScript."]},void 0)};export{$ as ReactInVue,h as ReactWrapper,R as SayHello,V as VueInReact,y as VuePlugin,d as VueWrapper,C as __vueraReactResolver,p as config};
//# sourceMappingURL=index.js.map
